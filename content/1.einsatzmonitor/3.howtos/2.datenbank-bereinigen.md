<!--
Source: https://feuersoftware.com/doku/ (HowTo: Datenbank bereinigen)
-->

---
title: Datenbank bereinigen
description: Anleitung zum Bereinigen der EinsatzMonitor-Datenbank
---

![Datenbank √∂ffnen](/images/einsatzmonitor/SQLBrowser_DB_open.png)

Mit der Zeit kann die Datenbank des EinsatzMonitors wachsen und die Performance beeintr√§chtigen. Diese Anleitung zeigt, wie Sie die Datenbank bereinigen k√∂nnen.

## Wann ist eine Bereinigung sinnvoll?

Eine Datenbankbereinigung ist empfehlenswert, wenn:

- Der EinsatzMonitor **langsamer** wird
- Die **Datenbankdatei** sehr gro√ü geworden ist (> 100 MB)
- **Alte Eins√§tze** nicht mehr ben√∂tigt werden
- Sie einen **Neustart** machen m√∂chten

## Datenbankstandort

Die SQLite-Datenbank befindet sich hier:

```
C:\Users\<Username>\Einsatz_Monitor\EinsatzMonitor.sqlite
```

## Methode 1: √úber die Einstellungen (empfohlen)

### Schritt 1: Einstellungen √∂ffnen

1. Starten Sie den EinsatzMonitor
2. Dr√ºcken Sie **F10** oder klicken Sie auf das **Zahnrad-Symbol**
3. Navigieren Sie zu **System** ‚Üí **Datenbank**

### Schritt 2: Bereinigungsoptionen w√§hlen

W√§hlen Sie, welche Daten gel√∂scht werden sollen:

| Option | Beschreibung |
|--------|--------------|
| **Alte Eins√§tze** | Eins√§tze √§lter als X Tage |
| **Protokolle** | Log-Eintr√§ge bereinigen |
| **Cache** | Zwischengespeicherte Daten |
| **Alles** | Komplette Datenbank leeren |

### Schritt 3: Zeitraum festlegen

F√ºr alte Eins√§tze k√∂nnen Sie einen Zeitraum w√§hlen:

- √Ñlter als **30 Tage**
- √Ñlter als **90 Tage**
- √Ñlter als **1 Jahr**
- **Benutzerdefiniert**

### Schritt 4: Bereinigung starten

1. Klicken Sie auf **Bereinigen**
2. Best√§tigen Sie die Sicherheitsabfrage
3. Warten Sie, bis der Vorgang abgeschlossen ist

::callout{type="warning"}
**Achtung:** Gel√∂schte Daten k√∂nnen nicht wiederhergestellt werden! Erstellen Sie vorher ggf. ein Backup.
::

## Methode 2: Manuell (f√ºr Fortgeschrittene)

### Backup erstellen

Bevor Sie manuell eingreifen, erstellen Sie ein Backup:

1. **Beenden** Sie den EinsatzMonitor
2. Kopieren Sie die Datenbankdatei:

```powershell
# In PowerShell ausf√ºhren
Copy-Item "$env:USERPROFILE\Einsatz_Monitor\EinsatzMonitor.sqlite" `
          "$env:USERPROFILE\Einsatz_Monitor\EinsatzMonitor_backup.sqlite"
```

### Datenbank l√∂schen

Um mit einer leeren Datenbank zu starten:

1. **Beenden** Sie den EinsatzMonitor
2. L√∂schen Sie die Datenbankdatei:

```powershell
Remove-Item "$env:USERPROFILE\Einsatz_Monitor\EinsatzMonitor.sqlite"
```

3. Starten Sie den EinsatzMonitor neu - eine neue Datenbank wird erstellt

### Datenbank komprimieren

Mit einem SQLite-Tool k√∂nnen Sie die Datenbank optimieren:

```sql
-- Mit DB Browser for SQLite oder √§hnlichem Tool
VACUUM;
```

Dies reorganisiert die Datenbank und gibt ungenutzten Speicherplatz frei.

## Automatische Bereinigung

Sie k√∂nnen eine automatische Bereinigung einrichten:

### Einstellungen

1. √ñffnen Sie **Einstellungen** ‚Üí **System** ‚Üí **Datenbank**
2. Aktivieren Sie **Automatische Bereinigung**
3. Konfigurieren Sie:

| Einstellung | Empfehlung |
|-------------|------------|
| **Intervall** | W√∂chentlich |
| **Eins√§tze behalten** | 365 Tage |
| **Protokolle behalten** | 30 Tage |

## Tipps zur Datenbankpflege

### Regelm√§√üige Wartung

- F√ºhren Sie monatlich eine √úberpr√ºfung durch
- Behalten Sie nur relevante Einsatzdaten
- Nutzen Sie die automatische Bereinigung

### Speicherplatz √ºberwachen

Beobachten Sie die Datenbankgr√∂√üe:

```powershell
# Dateigr√∂√üe anzeigen
Get-Item "$env:USERPROFILE\Einsatz_Monitor\EinsatzMonitor.sqlite" | 
    Select-Object Name, @{N='Size (MB)';E={[math]::Round($_.Length/1MB,2)}}
```

| Gr√∂√üe | Status |
|-------|--------|
| < 50 MB | ‚úÖ Normal |
| 50-100 MB | ‚ö†Ô∏è Beobachten |
| > 100 MB | üî¥ Bereinigung empfohlen |

### Backups

Erstellen Sie regelm√§√üige Backups:

- **Vor Updates** - Vor jeder Aktualisierung
- **W√∂chentlich** - Automatisches Backup einrichten
- **Vor Bereinigung** - Sicherheitskopie erstellen

## Fehlerbehebung

### "Datenbank ist gesperrt"

::collapsible{title="L√∂sung"}
Die Datenbank wird von einem anderen Prozess verwendet:

1. Beenden Sie alle EinsatzMonitor-Instanzen
2. Pr√ºfen Sie im Task-Manager auf laufende Prozesse
3. Starten Sie den Computer ggf. neu
::

### "Datenbank ist besch√§digt"

::collapsible{title="L√∂sung"}
Bei einer besch√§digten Datenbank:

1. Versuchen Sie die Reparatur mit einem SQLite-Tool
2. Oder stellen Sie ein Backup wieder her
3. Als letzte Option: Datenbank l√∂schen und neu beginnen
::

